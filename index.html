<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Tutor Pro | Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­ØµØµ ÙˆØ§Ù„Ø¯ÙØ¹</title>
    <style>
        :root { --bg: #09090b; --card: #141417; --accent: #6366f1; --text: #fafafa; }
        body { background: var(--bg); color: var(--text); font-family: system-ui; margin: 0; padding: 15px; }
        .card { background: var(--card); border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid #27272a; }
        h1 { color: var(--accent); text-align: center; }
        input { width: 100%; padding: 12px; margin: 8px 0; background: #000; border: 1px solid #27272a; color: #fff; border-radius: 12px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; margin-top: 5px; }
        .btn-main { background: var(--accent); color: white; width: 100%; padding: 15px; }
        .student-item { background: #1c1c20; padding: 15px; border-radius: 15px; margin-top: 10px; border: 1px solid #27272a; }
        .weeks-tracker { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 10px; }
        .week-box { text-align: center; padding: 8px; border-radius: 8px; font-size: 10px; background: #27272a; color: #71717a; border: 1px solid #3f3f46; }
        .week-passed { background: #10b981; color: white; border-color: #059669; }
        .payment-status { margin-top: 15px; padding: 12px; border-radius: 10px; text-align: center; font-weight: bold; font-size: 14px; cursor: pointer; }
        .unpaid { background: #450a0a; color: #fecaca; border: 1px solid #991b1b; }
        .paid { background: #064e3b; color: #d1fae5; border: 1px solid #065f46; }
        .session-btn { background: #3f3f46; color: white; font-size: 12px; margin-top: 10px; width: auto; padding: 8px 15px; }
    </style>
</head>
<body>

    <h1>Smart Tutor Pro ğŸ“</h1>

    <div class="card">
        <h3>â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
        <input type="text" id="sName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
        <input type="number" id="sPrice" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø¯ÙˆØ±Ø© 4 Ø£Ø³Ø§Ø¨ÙŠØ¹)">
        <button class="btn-main" onclick="saveStudent()">Ø­ÙØ¸ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø©</button>
    </div>

    <div id="list"></div>

    <script>
        function saveStudent() {
            const name = document.getElementById('sName').value;
            const price = document.getElementById('sPrice').value;
            if(!name || !price) return;

            const students = JSON.parse(localStorage.getItem('smart_students') || '[]');
            students.push({
                name,
                price,
                startDate: new Date().getTime(),
                sessionsCount: 0, // Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ Ø§Ù„ØªÙŠ Ø­Ø¶Ø±Ù‡Ø§
                paid: false
            });
            localStorage.setItem('smart_students', JSON.stringify(students));
            document.getElementById('sName').value = '';
            document.getElementById('sPrice').value = '';
            renderStudents();
        }

        function addSession(index) {
            let students = JSON.parse(localStorage.getItem('smart_students'));
            if(students[index].sessionsCount < 8) { // Ù†ÙØªØ±Ø¶ Ø­ØµØªÙŠÙ† ÙÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ x 4 Ø£Ø³Ø§Ø¨ÙŠØ¹ = 8 Ø­ØµØµ
                students[index].sessionsCount++;
                localStorage.setItem('smart_students', JSON.stringify(students));
                renderStudents();
            }
        }

        function togglePaid(index) {
            let students = JSON.parse(localStorage.getItem('smart_students'));
            students[index].paid = !students[index].paid;
            // Ø¥Ø°Ø§ Ø¯ÙØ¹ØŒ Ù†ØµÙØ± Ø§Ù„Ø­ØµØµ Ù„Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            if(students[index].paid) {
                // ÙŠÙ…ÙƒÙ†Ùƒ ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙˆØ± Ø§Ù„Ø¯ÙØ¹
                // students[index].sessionsCount = 0; 
                // students[index].startDate = new Date().getTime();
            }
            localStorage.setItem('smart_students', JSON.stringify(students));
            renderStudents();
        }

        function renderStudents() {
            const list = document.getElementById('list');
            const students = JSON.parse(localStorage.getItem('smart_students') || '[]');

            list.innerHTML = students.map((s, i) => {
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø­ØµØµ (ÙƒÙ„ Ø­ØµØªÙŠÙ† Ø£Ø³Ø¨ÙˆØ¹)
                const currentWeek = Math.ceil(s.sessionsCount / 2) || 1;
                const isFinished = s.sessionsCount >= 8; // Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£Ø®ÙŠØ±Ø© ÙÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø±Ø§Ø¨Ø¹

                return `
                    <div class="card student-item">
                        <div style="display:flex; justify-content:between; align-items:center">
                            <strong>ğŸ‘¤ ${s.name}</strong>
                            <span style="margin-right:auto; color:#a1a1aa; font-size:12px">Ø­ØµØ©: ${s.sessionsCount} / 8</span>
                        </div>
                        
                        <div class="weeks-tracker">
                            <div class="week-box ${s.sessionsCount >= 2 ? 'week-passed' : ''}">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1 ${s.sessionsCount >= 2 ? 'âœ…' : ''}</div>
                            <div class="week-box ${s.sessionsCount >= 4 ? 'week-passed' : ''}">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2 ${s.sessionsCount >= 4 ? 'âœ…' : ''}</div>
                            <div class="week-box ${s.sessionsCount >= 6 ? 'week-passed' : ''}">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3 ${s.sessionsCount >= 6 ? 'âœ…' : ''}</div>
                            <div class="week-box ${s.sessionsCount >= 8 ? 'week-passed' : ''}">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4 ${s.sessionsCount >= 8 ? 'âœ…' : ''}</div>
                        </div>

                        <button class="session-btn" onclick="addSession(${i})">â• ØªØ³Ø¬ÙŠÙ„ Ø­ØµØ© Ø§Ù„ÙŠÙˆÙ…</button>

                        <div class="payment-status ${s.paid ? 'paid' : 'unpaid'}" onclick="togglePaid(${i})">
                            ${isFinished ? (s.paid ? 'âœ… ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ' : 'ğŸš¨ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­ØµØµ - Ø§Ø·Ù„Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨') : 'â³ Ø§Ù„Ø¯ÙˆØ±Ø© Ù…Ø³ØªÙ…Ø±Ø©'}
                        </div>
                        <center><small style="color:#71717a; font-size:10px">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡: ${new Date(s.startDate).toLocaleDateString('ar-EG')}</small></center>
                    </div>
                `;
            }).join('');
        }
        renderStudents();
    </script>
</body>
</html>
