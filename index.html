<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Tutor Ultimate</title>

<style>
:root{
  --bg:#0b0b0f;
  --card:#15151c;
  --border:#27272f;
  --text:#f5f5f5;
  --muted:#a1a1aa;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system;
  display:flex;
  justify-content:center;
}

.app{
  width:100%;
  max-width:480px;
  padding:15px;
}

/* ===== HEADER ===== */
header{
  text-align:center;
  padding:20px 0;
}
header h1{
  margin:0;
  font-size:28px;
  background:linear-gradient(90deg,#6366f1,#22d3ee,#10b981,#f59e0b,#ef4444);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* ===== CARD ===== */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:16px;
  margin-bottom:14px;
}
.card h3{
  margin:0 0 12px;
  color:#818cf8;
  font-size:14px;
}

/* ===== INPUTS ===== */
input,select{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#000;
  color:white;
}

/* ===== BUTTON ===== */
button{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-weight:800;
  cursor:pointer;
}
.primary{background:#6366f1;color:white}
.success{background:#10b981;color:white}

/* ===== COLOR PALETTE ===== */
.palette{
  display:grid;
  grid-template-columns:repeat(8,1fr);
  gap:8px;
  margin-bottom:10px;
}
.color{
  aspect-ratio:1;
  border-radius:50%;
  cursor:pointer;
  border:2px solid transparent;
}
.color.active{
  border-color:white;
  transform:scale(1.15);
}

/* ===== STUDENT ===== */
.student{
  background:#1b1b24;
  border:1px solid var(--border);
  border-radius:18px;
  padding:12px;
  margin-bottom:10px;
}
.student-name{font-weight:800}
.student-weeks{
  display:flex;
  gap:6px;
  margin-top:8px;
}
.week{
  flex:1;
  padding:6px;
  border-radius:8px;
  text-align:center;
  font-size:11px;
  background:#27272f;
  color:#aaa;
}
.week.done{background:#10b981;color:white}

/* ===== STATUS BAR ===== */
.status{
  margin-top:10px;
  padding:10px;
  border-radius:12px;
  text-align:center;
  font-weight:800;
  cursor:pointer;
}
.status.wait{background:#27272f;color:#aaa}
.status.alert{background:#7f1d1d;color:#fff}
.status.paid{background:#065f46;color:#fff}

/* ===== SCHEDULE ===== */
.day{
  margin-top:10px;
}
.day h4{
  margin:0 0 6px;
  font-size:12px;
  color:var(--muted);
}
.slots{
  display:flex;
  gap:8px;
  overflow-x:auto;
}
.slot{
  min-width:80px;
  padding:8px;
  border-radius:12px;
  font-size:11px;
  color:white;
  text-align:center;
}
.slot.done{opacity:0.4;text-decoration:line-through}
</style>
</head>

<body>
<div class="app">

<header>
  <h1>Smart Tutor</h1>
</header>

<!-- ADD STUDENT -->
<div class="card">
<h3>ğŸ‘¤ Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨</h3>
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">

<div class="palette" id="palette"></div>

<button class="primary" onclick="addStudent()">Ø­ÙØ¸ Ø§Ù„Ø·Ø§Ù„Ø¨</button>
</div>

<!-- ADD SCHEDULE -->
<div class="card">
<h3>â° Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¹Ø¯</h3>
<select id="studentSelect"></select>
<input type="time" id="time">
<select id="day">
  <option>Ø§Ù„Ø³Ø¨Øª</option><option>Ø§Ù„Ø£Ø­Ø¯</option><option>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
  <option>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option><option>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option><option>Ø§Ù„Ø®Ù…ÙŠØ³</option>
</select>
<button class="success" onclick="addSchedule()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<!-- STUDENTS -->
<div class="card">
<h3>ğŸ“‹ Ø§Ù„Ø·Ù„Ø§Ø¨</h3>
<div id="students"></div>
</div>

</div>

<script>
let students=JSON.parse(localStorage.getItem("SMART"))||[];
let activeColor="#6366f1";

const colors=[
"#6366f1","#4f46e5","#3b82f6","#0ea5e9","#06b6d4","#14b8a6","#10b981",
"#84cc16","#eab308","#f59e0b","#f97316","#ef4444","#f43f5e","#ec4899",
"#d946ef","#a855f7","#8b5cf6","#64748b"
];

function initPalette(){
  palette.innerHTML="";
  colors.forEach(c=>{
    let d=document.createElement("div");
    d.className="color"+(c===activeColor?" active":"");
    d.style.background=c;
    d.onclick=()=>{
      activeColor=c;
      initPalette();
    };
    palette.appendChild(d);
  });
}

function addStudent(){
  let name=document.getElementById("name").value.trim();
  if(!name)return;
  students.push({
    id:Date.now(),
    name,
    color:activeColor,
    schedules:[],
    lessons:0,
    paid:false
  });
  save();
  name.value="";
}

function addSchedule(){
  let id=+studentSelect.value;
  let time=document.getElementById("time").value;
  let day=document.getElementById("day").value;
  if(!id||!time)return;
  let s=students.find(x=>x.id===id);
  s.schedules.push({day,time,done:false});
  save();
}

function toggleLesson(s){
  if(s.lessons<16){
    s.lessons++;
  }
  save();
}

function togglePay(s){
  s.paid=true;
  save();
}

function save(){
  localStorage.setItem("SMART",JSON.stringify(students));
  render();
}

function render(){
  studentsDiv.innerHTML="";
  studentSelect.innerHTML="<option value=''>Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨</option>";

  students.forEach(s=>{
    studentSelect.innerHTML+=`<option value="${s.id}">${s.name}</option>`;

    let weeks="";
    for(let i=1;i<=4;i++){
      weeks+=`<div class="week ${s.lessons>=i*4?"done":""}">Ø£Ø³Ø¨ÙˆØ¹ ${i}</div>`;
    }

    let statusClass="wait";
    let statusText="Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ØµØµ";
    if(s.lessons>=16&&!s.paid){
      statusClass="alert";
      statusText="Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­ØµØµ - Ø§Ø·Ù„Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨";
    }
    if(s.paid){
      statusClass="paid";
      statusText="ØªÙ… Ø§Ù„Ø¯ÙØ¹ âœ”";
    }

    studentsDiv.innerHTML+=`
    <div class="student">
      <div class="student-name">${s.name}</div>
      <div class="student-weeks">${weeks}</div>

      <div class="status ${statusClass}" onclick="${statusClass==='alert'?'togglePay(students.find(x=>x.id==='+s.id+'))':''}">
        ${statusText}
      </div>

      <button class="primary" style="margin-top:8px;background:${s.color}"
        onclick="toggleLesson(students.find(x=>x.id===${s.id}))">
        ØªØ³Ø¬ÙŠÙ„ Ø­ØµØ©
      </button>
    </div>`;
  });
}

initPalette();
render();
</script>

</body>
</html>
